<!DOCTYPE html>
<html>
<head>
    <title>Summarize PDF</title>
    <link rel="stylesheet" href="../styles.css">

    <style>
        /* ---------- PREMIUM PAGE TITLE ---------- */
        .page-title {
            font-size: 38px;
            font-weight: 800;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #7c3aed, #5b21b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* ---------- FILE INPUT PREMIUM ---------- */
        input[type="file"] {
            padding: 14px;
            background: rgba(255,255,255,0.7);
            border-radius: 14px;
            border: 1px solid #e5e7eb;
            width: 100%;
            max-width: 600px;
            cursor: pointer;
            transition: 0.25s;
        }

        input[type="file"]:hover {
            background: rgba(255,255,255,1);
            transform: translateY(-2px);
        }

        /* ---------- PREMIUM SUMMARY CARD (Same theme as Explain Topic) ---------- */
        .summary-card {
            background: #ffffff;
            padding: 30px;
            margin-top: 25px;
            border-radius: 18px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            border-left: 6px solid #7c3aed;
            font-size: 17px;
            line-height: 1.7;
            color: #333;
            animation: fadeIn 0.5s ease-out forwards;
            white-space: normal;
            overflow-wrap: break-word;
        }

        /* Section heading */
        .summary-card h3 {
            color: #4c1d95;
            font-size: 22px;
            font-weight: 700;
            margin-top: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Icon for headings */
        .summary-card h3::before {
            content: "üî∑";
            font-size: 22px;
        }

        /* Bullet points */
        .summary-card ul {
            padding-left: 25px;
            margin-top: 10px;
        }

        .summary-card li {
            margin-bottom: 8px;
            color: #444;
        }

        /* Fade-in Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>

<body>

<button class="menu-btn" onclick="toggleSidebar()">‚ò∞</button>

<div class="sidebar" id="sidebar">
    <a href="../index.html">üè† Home</a>
    <a href="summarize.html">üìÑ Summarize PDF</a>
    <a href="make-notes.html">üìù Make Notes</a>
    <a href="mcq.html">‚ùì Make MCQs</a>
    <a href="explain.html">üí° Explain Topic</a>
    <a href="qna.html">üí¨ QnA</a>
    <a href="notes.html">üìö Notes History</a>
    <a href="#" onclick="toggleTheme(); return false;">üåô Toggle Dark Mode</a>
</div>

<div class="container">

    <h2 class="page-title">Summarize PDF</h2>

    <input type="file" id="pdfFile" accept="application/pdf">

    <button class="btn" onclick="summarizePDF()">Summarize</button>

    <div id="loader" class="loader"></div>

    <h3 style="margin-top: 30px;">Result</h3>

    <div id="result" class="summary-card"></div>

</div>

<script src="../app.js"></script>

<script>
    // Convert plain AI summary to premium HTML
    function convertSummaryToHTML(text) {

        // Convert headings (### or **title**)
        text = text.replace(/^\s*(###|\*\*)(.*?)(\*\*)?$/gm, "<h3>$2</h3>");

        // Convert bullet points (*, -, +)
        text = text.replace(/^\s*[\*\-\+]\s+(.*)$/gm, "<li>$1</li>");

        // Wrap bullets inside <ul>
        text = text.replace(/(<li>[\s\S]*?<\/li>)/g, "<ul>$1</ul>");

        return text;
    }

    // Override default output renderer
    function updateSummaryResult(summary) {
        const out = document.getElementById("result");
        out.innerHTML = convertSummaryToHTML(summary);
    }
</script>

</body>
</html>
